{"ast":null,"code":"import _classCallCheck from\"C:/Users/Maquzo/OneDrive/Desktop/drawio/drawio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Maquzo/OneDrive/Desktop/drawio/drawio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/Maquzo/OneDrive/Desktop/drawio/drawio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Maquzo/OneDrive/Desktop/drawio/drawio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import io from'socket.io-client';import'./style.css';import{jsx as _jsx}from\"react/jsx-runtime\";var Board=/*#__PURE__*/function(_React$Component){_inherits(Board,_React$Component);var _super=_createSuper(Board);function Board(props){var _this;_classCallCheck(this,Board);_this=_super.call(this,props);_this.socket=io.connect(\"http://localhost:3000\");_this.isDrawing=false;_this.socket.on(\"canvas-data\",function(data){var image=new Image();var canvas=document.querySelector('#board');var ctx=canvas.getContext('2d');image.onload=function(){ctx.drawImage(image,0,0);};image.src=data;});return _this;}_createClass(Board,[{key:\"componentDidMount\",value:function componentDidMount(){this.drawOnCanvas();}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(newProps){this.ctx.strokeStyle=newProps.color;this.ctx.lineWidth=newProps.size;}},{key:\"drawOnCanvas\",value:function drawOnCanvas(){var canvas=document.querySelector('#board');this.ctx=canvas.getContext('2d');var ctx=this.ctx;var sketch=document.querySelector('#sketch');var sketch_style=getComputedStyle(sketch);canvas.width=parseInt(sketch_style.getPropertyValue('width'));canvas.height=parseInt(sketch_style.getPropertyValue('height'));var mouse={x:0,y:0};var last_mouse={x:0,y:0};/* Mouse Capturing Work */canvas.addEventListener('mousemove',function(e){last_mouse.x=mouse.x;last_mouse.y=mouse.y;mouse.x=e.pageX-this.offsetLeft;mouse.y=e.pageY-this.offsetTop;},false);/* Drawing on Paint App */ctx.lineWidth=0.1;ctx.lineJoin='round';ctx.lineCap='round';ctx.strokeStyle='black';canvas.addEventListener('mousedown',function(e){canvas.addEventListener('mousemove',onPaint,false);},false);canvas.addEventListener('mouseup',function(){canvas.removeEventListener('mousemove',onPaint,false);},false);var root=this;var onPaint=function onPaint(){ctx.beginPath();ctx.moveTo(last_mouse.x,last_mouse.y);ctx.lineTo(mouse.x,mouse.y);ctx.closePath();ctx.stroke();if(root.timeout!==undefined)clearTimeout(root.timeout);root.timeout=setTimeout(function(){var base64ImageData=canvas.toDataURL(\"image/png\");root.socket.emit(\"canvas-data\",base64ImageData);},1000);};}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{class:\"sketch\",id:\"sketch\",children:/*#__PURE__*/_jsx(\"canvas\",{className:\"board\",id:\"board\"})});}}]);return Board;}(React.Component);export default Board;","map":{"version":3,"sources":["C:/Users/Maquzo/OneDrive/Desktop/drawio/drawio/src/components/board/Board.jsx"],"names":["React","io","Board","props","socket","connect","isDrawing","on","data","image","Image","canvas","document","querySelector","ctx","getContext","onload","drawImage","src","drawOnCanvas","newProps","strokeStyle","color","lineWidth","size","sketch","sketch_style","getComputedStyle","width","parseInt","getPropertyValue","height","mouse","x","y","last_mouse","addEventListener","e","pageX","offsetLeft","pageY","offsetTop","lineJoin","lineCap","onPaint","removeEventListener","root","beginPath","moveTo","lineTo","closePath","stroke","timeout","undefined","clearTimeout","setTimeout","base64ImageData","toDataURL","emit","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport io from 'socket.io-client';\r\n\r\nimport './style.css';\r\n\r\nclass Board extends React.Component {\r\n\r\n    timeout;\r\n    socket = io.connect(\"http://localhost:3000\");\r\n    ctx;\r\n    isDrawing = false;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.socket.on(\"canvas-data\", function(data){\r\n                var image = new Image();\r\n                var canvas = document.querySelector('#board');\r\n                var ctx = canvas.getContext('2d');\r\n                image.onload = function() {\r\n                    ctx.drawImage(image, 0, 0);\r\n\r\n                };\r\n                image.src = data;\r\n            })\r\n        }\r\n    \r\n\r\n    componentDidMount() {\r\n        this.drawOnCanvas();\r\n    }\r\n\r\n    componentWillReceiveProps(newProps) {\r\n        this.ctx.strokeStyle = newProps.color;\r\n        this.ctx.lineWidth = newProps.size;\r\n    }\r\n\r\n    drawOnCanvas() {\r\n        var canvas = document.querySelector('#board');\r\n        this.ctx = canvas.getContext('2d');\r\n        var ctx = this.ctx;\r\n\r\n        var sketch = document.querySelector('#sketch');\r\n        var sketch_style = getComputedStyle(sketch);\r\n        canvas.width = parseInt(sketch_style.getPropertyValue('width'));\r\n        canvas.height = parseInt(sketch_style.getPropertyValue('height'));\r\n\r\n        var mouse = {x: 0, y: 0};\r\n        var last_mouse = {x: 0, y: 0};\r\n\r\n        /* Mouse Capturing Work */\r\n        canvas.addEventListener('mousemove', function(e) {\r\n            last_mouse.x = mouse.x;\r\n            last_mouse.y = mouse.y;\r\n\r\n            mouse.x = e.pageX - this.offsetLeft;\r\n            mouse.y = e.pageY - this.offsetTop;\r\n        }, false);\r\n\r\n\r\n        /* Drawing on Paint App */\r\n        ctx.lineWidth = 0.1;\r\n        ctx.lineJoin = 'round';\r\n        ctx.lineCap = 'round';\r\n        ctx.strokeStyle = 'black';\r\n\r\n        canvas.addEventListener('mousedown', function(e) {\r\n            canvas.addEventListener('mousemove', onPaint, false);\r\n        }, false);\r\n\r\n        canvas.addEventListener('mouseup', function() {\r\n            canvas.removeEventListener('mousemove', onPaint, false);\r\n        }, false);\r\n\r\n        var root = this;\r\n        var onPaint = function() {\r\n            ctx.beginPath();\r\n            ctx.moveTo(last_mouse.x, last_mouse.y);\r\n            ctx.lineTo(mouse.x, mouse.y);\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n\r\n            if(root.timeout !== undefined) clearTimeout(root.timeout);\r\n            root.timeout = setTimeout(function(){\r\n                var base64ImageData = canvas.toDataURL(\"image/png\");\r\n                root.socket.emit(\"canvas-data\", base64ImageData);\r\n            }, 1000)\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div class=\"sketch\" id=\"sketch\">\r\n                <canvas className=\"board\" id=\"board\"></canvas>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Board"]},"metadata":{},"sourceType":"module"}